{"version":3,"sources":["../../../app/routes/workspace_submissions_first_route.js"],"names":["Encompass","WorkspaceSubmissionsFirstRoute","Ember","Route","extend","model","workspace","modelFor","console","log","get","afterModel","submissions","transition","sorted","sortBy","firstStudent","lastRevision","getEach","lastIndexOf","transitionTo","objectAt"],"mappings":";;AAAA;;;;;;AAMAA,UAAUC,8BAAV,GAA2CC,MAAMC,KAAN,CAAYC,MAAZ,CAAmB;;AAE5DC,SAAO,iBAAU;AACf,QAAIC,YAAY,KAAKC,QAAL,CAAc,WAAd,CAAhB;AACAC,YAAQC,GAAR,CAAY,qCAAqCH,UAAUI,GAAV,CAAc,IAAd,CAAjD;AACA,WAAOJ,UAAUI,GAAV,CAAc,aAAd,CAAP;AACD,GAN2D;;AAQ5DC,cAAY,oBAASC,WAAT,EAAsBC,UAAtB,EAAkC;AAC5CL,YAAQC,GAAR,CAAY,sBAAZ,EAAoCG,WAApC;AACA,QAAIN,YAAY,KAAKC,QAAL,CAAc,WAAd,CAAhB;AACAC,YAAQC,GAAR,CAAY,0CAA0CG,YAAYF,GAAZ,CAAgB,QAAhB,CAAtD;AACA,QAAGE,YAAYF,GAAZ,CAAgB,QAAhB,IAA4B,CAA/B,EAAkC;AAChC,UAAII,SAASF,YAAYG,MAAZ,CAAmB,SAAnB,EAA8B,YAA9B,CAAb;AACA,UAAIC,eAAeF,OAAOJ,GAAP,CAAW,qBAAX,CAAnB;AACA,UAAIO,eAAeH,OAAOI,OAAP,CAAe,SAAf,EAA0BC,WAA1B,CAAsCH,YAAtC,CAAnB;;AAEA,WAAKI,YAAL,CAAkB,sBAAlB,EAA0Cd,SAA1C,EAAqDQ,OAAOO,QAAP,CAAgBJ,YAAhB,CAArD;AACD;AACF;;AAnB2D,CAAnB,CAA3C","file":"workspace_submissions_first_route.js","sourcesContent":["/**\n  * # Workspace Submissions First Route\n  * @description This route simply forwards the user to the first submission\n  * @author Amir Tahvildaran <amir@mathforum.org>\n  * @since 1.0.1\n  */\nEncompass.WorkspaceSubmissionsFirstRoute = Ember.Route.extend({\n\n  model: function(){\n    var workspace = this.modelFor('workspace');\n    console.log(\"W-S Frist route, for workspace: \" + workspace.get('id') );\n    return workspace.get('submissions');\n  },\n\n  afterModel: function(submissions, transition) {\n    console.log('in after model.. NOT', submissions);\n    var workspace = this.modelFor('workspace');\n    console.log(\"W-S First Route, num of submissions: \" + submissions.get('length') );\n    if(submissions.get('length') > 0) {\n      var sorted = submissions.sortBy('student', 'createDate');\n      var firstStudent = sorted.get('firstObject.student');\n      var lastRevision = sorted.getEach('student').lastIndexOf(firstStudent);\n\n      this.transitionTo('workspace.submission', workspace, sorted.objectAt(lastRevision));\n    }\n  }\n\n});\n"]}