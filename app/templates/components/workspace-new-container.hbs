<div class="flex-container-full">
  <div class="flex-item-full filter-options collapse" id="filter-list-side">
    {{submissions-filter
      store=store
      onSearch=(action "setFilterCriteria")
      sections=model.sections
      assignments=model.assignments
      users = model.users
    }}

  </div>

  <div class="flex-item-full list-view">
    <div class="list-container">
      <h1>Submissions</h1>
      <div class="searchbar">
        {{search-bar
          onSearch=(action "searchAnswers")
          showFilter=true
          searchOptions = searchOptions
          basePlaceholder="Search submissions"
          inputValue=searchInputValue
          clearSearchResults=(action "clearSearchResults")
          selectedCriterion=searchCriterion
          }}

        {{!-- {{#link-to 'submissions.new' id="submission-new-link" class="new-link-btn"}}
          <i class="fas fa-plus"></i>
        {{/link-to}} --}}
      </div>
    </div>
    <div class="results-list">
      <div class="results-info">
        <div class="results-message">
          {{{listResultsMessage}}}
        </div>
        <label>Do Include Revisions</label>
        <input type="checkbox" checked={{doIncludeRevisions}} onclick={{action "toggleIncludeRevisions"}}>
        <div class="side-icons">
          <i class="fas fa-redo-alt refresh-icon" {{action 'refreshList'}} title="Refresh Submission list"></i>
          <span class="layout-icons">
          {{#if showList}}
            <img src="/images/grid.svg" alt="grid" {{action 'setGrid'}} title="Show in grid view">
            <img src="/images/list-active.svg" alt="list" {{action 'setList'}} title="Currently in list view">
          {{/if}}
          {{#if showGrid}}
            <img src="/images/grid-active.svg" alt="grid" {{action 'setGrid'}} title="Currently in grid view">
            <img src="/images/list.svg" alt="list" {{action 'setList'}} title="Show in list view">
          {{/if}}
          </span>
        </div>
      </div>
      <div class="results-items" id="layout-view">
        <div class="sort-bar">
          <div class="sort-bar-item toggle-all">
            <label>Check All</label>
            <input type="checkbox" onclick={{action "toggleCheckAll"}}>
          </div>
          {{
            toggle-control
            classToAdd="sort-bar-item student"
            onUpdate=(action "updateSortCriterion")
            initialState=0
            options=sortOptions.student
            label="Student"
            parentProp=sortCriterion
            type="student"
            activeType=sortCriterion.type
          }}
          {{
            toggle-control
            classToAdd="sort-bar-item revision"
            onUpdate=(action "updateSortCriterion")
            initialState=1
            options=sortOptions.revision
            label="Revision"
            type="revision"
            activeType=sortCriterion.type
          }}
          {{
            toggle-control
            classToAdd="sort-bar-item explanation"
            onUpdate=(action "updateSortCriterion")
            initialState=0
            options=sortOptions.explanation
            label="Explanation"
            type="explanation"
            activeType=sortCriterion.type
          }}
          {{
            toggle-control
            classToAdd="sort-bar-item section"
            onUpdate=(action "updateSortCriterion")
            initialState=0
            options=sortOptions.section
            label="Class"
            type="section"
            activeType=sortCriterion.type
          }}
          {{
            toggle-control
            classToAdd="sort-bar-item createDate"
            onUpdate=(action "updateSortCriterion")
            initialState=0
            options=sortOptions.createDate
            label="Date"
            type="createDate"
            activeType=sortCriterion.type
          }}

          <div class="sort-bar-item info-item"></div>
          <div class="sort-bar-item more"></div>
        </div>
        {{#if showList}}
          {{submission-viewer-list isSearching=isSearchingAnswers answers=sortedAnswers metadata=answersMetadata isList=true isGrid=false moreMenuOptions=moreMenuOptions store=store
          onSelect=(action "updateSelectedAnswerIds")
          selectedAnswerIds=selectedAnswerIds
          threads=submissionThreads

          }}
        {{/if}}
        {{#if showGrid}}
          {{submission-viewer-list isSearching=isSearchingAnswers store=store answers=displayAnswers metadata=answersMetadata isList=false isGrid=true moreMenuOptions=moreMenuOptions
          }}
        {{/if}}

        {{pagination-control details=answersMetadata initiatePageChange=(action "initiatePageChange")}}
      </div>
    </div>
  </div>
</div>

<div class="toggle-filter-menu">
  <button {{action 'toggleMenu'}}><i id="arrow-icon" class="fas fa-chevron-right"></i></button>
</div>

<script>
  $('.list-view').click(function (e) {
    if (!($('#filter-list-side').hasClass('collapse'))) {
      $('#arrow-icon').toggleClass('fa-rotate-180');
    }
    $('#filter-list-side').addClass('collapse');
  });

  $('#submission-new-link').click(function (e) {
    $('#outlet').removeClass('hidden');
  });
</script>