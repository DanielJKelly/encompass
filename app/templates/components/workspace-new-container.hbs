<div class="flex-container-full">
  {{#if showSubmissionViewer}}
    <div class="flex-item-full filter-options collapse" id="filter-list-side">
      {{submissions-filter
        store=store
        onSearch=(action "setFilterCriteria")
        sections=model.sections
        assignments=model.assignments
        users = model.users
      }}

      {{#if selectedAnswers.length}}
        <button class="primary-button create-ws" {{action "toSettingsConfig"}}>Create Workspace</button>
      {{/if}}

    </div>
    <div class="flex-item-full list-view">
      <div class="list-container">
        <h1>Submissions</h1>
        <div class="searchbar">
          {{search-bar
            onSearch=(action "searchAnswers")
            showFilter=true
            searchOptions = searchOptions
            basePlaceholder="Search submissions"
            inputValue=searchInputValue
            clearSearchResults=(action "clearSearchResults")
            selectedCriterion=searchCriterion
            }}

        </div>
      </div>
      <div class="results-list">
        <div class="results-info">
          <div class="results-icons">
            <span class="icon-message submissions"><i class="fas fa-file"></i> {{nonTrashedAnswers.length}} Submissions</span>
            <span class="icon-message selected"><i class="fas fa-check-circle"></i> {{selectedAnswers.length}} Selected</span>
            <span class="icon-message students"><i class="fas fa-user"></i> {{submissionThreads.size}} Students</span>
          </div>

          <div class="side-icons">
            <label>Do Include Revisions</label>
            <input type="checkbox" checked={{doIncludeRevisions}} onclick={{action "toggleIncludeRevisions"}}>
            <i class="fas fa-redo-alt refresh-icon" {{action 'refreshList'}} title="Refresh Submission list"></i>
          </div>
        </div>
        <div class="results-items" id="layout-view">
          <div class="sort-bar">
            <div class="sort-bar-item toggle-all">
              <label>Check All</label>
              <input type="checkbox" onclick={{action "toggleCheckAllAnswers"}}>
            </div>
            {{
              toggle-control
              classToAdd="sort-bar-item student"
              onUpdate=(action "updateSortCriterion")
              initialState=1
              options=sortOptions.student
              label="Student"
              parentProp=sortCriterion
              type="student"
              activeType=sortCriterion.type
            }}
            {{
              toggle-control
              classToAdd="sort-bar-item revisions"
              onUpdate=(action "updateSortCriterion")
              initialState=0
              options=sortOptions.revisions
              label="Revision"
              type="revisions"
              activeType=sortCriterion.type
            }}
            {{
              toggle-control
              classToAdd="sort-bar-item explanation"
              onUpdate=(action "updateSortCriterion")
              initialState=0
              options=sortOptions.explanation
              label="Explanation"
              type="explanation"
              activeType=sortCriterion.type
            }}
            {{
              toggle-control
              classToAdd="sort-bar-item section"
              onUpdate=(action "updateSortCriterion")
              initialState=0
              options=sortOptions.section
              label="Class"
              type="section"
              activeType=sortCriterion.type
            }}
            {{
              toggle-control
              classToAdd="sort-bar-item createDate"
              onUpdate=(action "updateSortCriterion")
              initialState=0
              options=sortOptions.createDate
              label="Date"
              type="createDate"
              activeType=sortCriterion.type
            }}

            <div class="sort-bar-item info-item"></div>
            <div class="sort-bar-item more"></div>
          </div>
          {{#if isFetchingAnswers}}
            <p class="loading-message">Loading submissions... Thank you for your patience</p>
          {{else if isRequestTooLarge}}
            {{tooLargeRequestErrorMessage}}
          {{else}}
          {{submission-viewer-list answers=sortedAnswers metadata=answersMetadata isList=true isGrid=false moreMenuOptions=moreMenuOptions store=store
            onSelect=(action "updateSelectedAnswers")
            selectedAnswers=selectedAnswers
            threads=submissionThreads}}
          {{/if}}
        </div>
      </div>
    </div>
    {{/if}}
    {{#if showWorkspaceSettingsMenu}}
    {{workspace-new-settings
      store=store
      users=model.users
      folderSets=model.folderSets
      onProceed=(action "createWorkspace")
    }}
    {{/if}}
  </div>
  {{#if showSubmissionViewer}}
    <div class="toggle-filter-menu">
    <button {{action 'toggleMenu'}}><i id="arrow-icon" class="fas fa-chevron-right"></i></button>

    </div>
{{/if}}


<script>
  $('.list-view').click(function (e) {
    if (!($('#filter-list-side').hasClass('collapse'))) {
      $('#arrow-icon').toggleClass('fa-rotate-180');
    }
    $('#filter-list-side').addClass('collapse');
  });

  $('#submission-new-link').click(function (e) {
    $('#outlet').removeClass('hidden');
  });
</script>