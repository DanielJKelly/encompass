<h2>Create a Workspace from EnCoMPASS Submissions</h2>

<form id='encImportForm' class='properForm'>
  <fieldset>
    <div class="heading">
      <h4>Filter Criteria <span class="required-star">*</span></h4>
      <p class="info">We either need a date range or at least one of teacher, assignment, problem, or class in order to
        create a workspace.</p>
    </div>
    <ol class="filter-criteria">
      <li class="ws-filter teacher">
        <label for="teacher">Teacher</label>
        {{#if currentUser.isTeacher}}
        <p class="workspace-info">{{currentUser.username}}</p>
        {{else}}
        {{my-select selectedValue=selectedTeacher content=teacherPool optionLabelPath="username" prompt="Please select
        a username" action=(action (mut selectedTeacher))}}
        {{/if}}
      </li>
      <li class="ws-filter assignment">
        <label for="assignment">Assignment</label>
        {{my-select content=model.assignments optionLabelPath="problem.title" prompt="Please select an assignment"
        action=(action (mut selectedAssignment))}}
      </li>
      <li class="ws-filter problem">
        <label for="problem">Problem</label>
        {{#if selectedProblem}}
          <p>{{selectedProblem.title}}<i {{action (mut selectedProblem) null}} class="far fa-times-circle"></i></p>
        {{else}}
          {{#if addProblemTypeahead}}
            {{twitter-typeahead sourceFunction=addProblemTypeahead placeholder="Start typing a problem title..." selectedValue=selectedProblem isAsync=true optionLabelPath="title"}}
            {{#each problemFormErrors as |error|}}
              <p class="error-message">{{error}}</p>
            {{/each}}
          {{/if}}
        {{/if}}
      </li>
      <li class="ws-filter section">
        <label for="section">Class</label>
        {{my-select content=model.sections optionLabelPath="name" prompt="Please select a class" action=(action (mut
        selectedSection))}}
      </li>
      <li class="ws-filter date">
        <label for="startDate">Date Range</label>
        {{input id="dateRange" name="daterange" type="text" value=dateRange}}
      </li>
      {{!-- <li>
        <label for="endDate">End Date</label>
        {{input id="endDate" name="daterange" type="text" value=endDate}}
      </li> --}}
    </ol>
    <div class="heading spacing">
      <h4>Workspace Settings</h4>
      <p class="info">Workspace settings can always be changed after creation from the workspace
        info page.</p>
    </div>
    <ol class="workspace-settings">
      <li class="ws-settings owner">
        <label for="owner">Owner <span class="required-star">*</span></label>
        {{#if currentUser.isTeacher}}
        <p class="workspace-info">{{currentUser.username}}</p>
        {{else}}
        {{my-select selectedValue=selectedOwner content=teacherPool optionLabelPath="username" prompt="Please select an
        owner" action=(action (mut selectedOwner))}}
        {{/if}}
      </li>
      <li class="ws-settings name">
        <label for="name">Workspace Name</label>
        {{input id="requestedName" type="text" value=requestedName}}
      </li>
      <li class="ws-settings folders">
        <label for="folders">Folders</label>
        {{my-select content=model.folderSets optionLabelPath='name' prompt="Please select a folder set" action=(action
        (mut selectedFolderSet))}}
      </li>

      <li class="mode">
        <label>Privacy Setting <span class="required-star">*</span></label>
        <input type="radio" checked={{is-equal mode "private"}} required="true" name="mode" value="private" onclick={{action "radioSelect" "private"}}>
        <label class="radio-label">Private</label>
        <input type="radio" checked={{is-equal mode "public"}} required="true" name="mode" value="public" onclick={{action "radioSelect" "public"}}>
        <label class="radio-label">Public</label>
      </li>
    </ol>
  </fieldset>


</form>

{{#if missingRequiredFields}}
<p class="error-message">Please fill in all required fields.</p>
{{/if}}

{{#if createdWorkspace}}
<p class="success-message">Success!</p>
{{/if}}

{{#if isEmptyAnswerSet}}
<p class="error-message">Sorry, no answers were found matching your criteria.</p>
{{/if}}

{{#each findRecordErrors as |error|}}
  <p class="error-message">{{error}}</p>
{{/each}}
{{#each wsRequestErrors as |error|}}
  <p class="error-message">{{error}}</p>
{{/each}}

<button class="action_button create-ws" {{action "buildCriteria"}}>Create</button>
