<h1>User Detail Info</h1>

<article class="user">
  <h2>{{user.username}}</h2>
  <table class="values rows" style="background-color: #efefef">
    <tr>
      <th>Label</th>
      <th>Value</th>
    </tr>
    <tr>
      <td>Username</td>
      <td>
        {{#if isEditing}}
          {{input value=user.username classNames='user.userName'}}
        {{else}}
          {{user.username}}
        {{/if}}
      </td>
    </tr>
    <tr>
      <td>Name</td>
      <td>
        {{#if isEditing}}
          {{input value=user.name classNames='user.userName'}}
        {{else}}
          {{user.name}}
        {{/if}}
      </td>
    </tr>
    <tr>
      <td>Display Name</td>
      <td>
        <span class='displayName'>{{user.displayName}}</span>
      </td>
    </tr>
    <tr>
      <td>Email</td>
      <td>
        {{#if isEditing}}
          {{input value=user.email classNames='user.userName'}}
        {{else}}
          {{user.email}}
        {{/if}}
      </td>
    </tr>
    <tr>
      <td>Organization</td>
      <td>
        {{user.organization.name}}
      </td>
    </tr>
    <tr>
      <td>Location</td>
      <td>
        {{user.location}}
      </td>
    </tr>
    <tr>
      <td>Seen Tour</td>
      <td>
        {{#if isEditing}} {{#if seenTour}}
        <button class='clearTour' {{action 'clearTour'}}>re-take tour</button>
        {{else}}
        <button class='doneTour' {{action 'doneTour'}}>don't show the tour</button>
        {{/if}} {{/if}}
        <span class='tourDate'>{{tourDate}}</span>
      </td>
    </tr>
    <tr>
      <td>Last Seen</td>
      <td>{{lastSeenDate}}</td>
    </tr>
    <tr>
      <td>Admin</td>
      <td>
        {{#if isEditing}} {{#if currentUser.isAdmin}} {{input type="checkbox" checked=user.isAdmin value=admin classNames='isAdmin'}}
        {{else}} {{user.isAdmin}} {{/if}} {{else}} {{user.isAdmin}} {{/if}}
      </td>
    </tr>
    {{#if user.isAuthorized}}
      <tr>
        <td>Authorized</td>
        <td>
          {{#if isEditing}}
            {{#if currentUser.isAdmin}}
              {{input type="checkbox" checked=user.isAuthorized value=authorized classNames='isAuthorized'}}
              {{else}}
                {{user.isAuthorized}}
            {{/if}}
          {{else}}
              {{user.isAuthorized}}
          {{/if}}
        </td>
      </tr>
    {{else}}
      <tr>
        <td>Request Reason</td>
        <td>
          {{user.requestReason}}
        </td>
      </tr>
      {{#if isEditing}}
        <tr>
          <td>Authorize</td>
          <td>
            {{#if currentUser.isAdmin}}
              {{input type="checkbox" checked=user.isAuthorized value=authorized classNames='isAuthorized'}}
            {{else}}
              {{user.isAuthorized}}
            {{/if}}
          </td>
        </tr>
      {{else}}
        <tr>
          <td>Authorized</td>
          <td>
            No
          </td>
        </tr>
      {{/if}}
    {{/if}}
  </table>
  {{#if currentUser.isAdmin}}
    {{#if isEditing}}
      <button class='saveUser' {{action 'saveUser'}}>save</button>
    {{else}}
      <button class='editUser' {{action 'editUser'}}>edit</button>
    {{/if}}
  {{/if}}
</article>