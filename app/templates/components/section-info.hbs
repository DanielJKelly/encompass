<header id="problemnewheader">
  <h2>Section Details</h2>
  <div class="clear"></div>
</header>

{{#if isEditing}}
    <form id='sectionupdateform' class='properForm'>
      <fieldset>
        <ol>
          <li>
            <label for="name">Section Name</label>
            {{input name="name" id="name" type="text" value=sectionName placeholder=section.name}}
          </li>
          {{#each section.teachers as |teacher|}}
            <li>
              <label for="teacher">Teacher</label>
              {{input name="teacher" id="teacher" type="text" value=teacherName placeholder=teacher.username}}
            </li>
          {{/each}}
        </ol>
      </fieldset>
    </form>
  <button class="action_button" {{action 'updateSection'}} style="margin-right: 30px">Update Section</button>
  <button class="action_button" id="deleteSection" {{action 'deleteSection'}} style="margin-right: 30px">
    Delete Section
  </button>

{{else}}

  <form id="sectioninfo">
    <fieldset>
      <ul>
        <li>
            <label for="name">Section Name</label>
            {{input name="name" id="name" type="text" value=sectionName disabled=true placeholder=section.name}}
          </li>
          <li>
            <label for="problems">Problems</label>
              {{!-- <ul class="listing">
                {{#each section.problems as |problem|}}
                <li>{{problem.title}}</li>
                {{/each}}
              </ul> --}}
            {{input name="problems" id="problems" type="text" value=problems disabled=true placeholder="N/A"}}
          </li>
          <li class="teacherslist">
            <label for="teachers">Teachers</label>
             {{#each section.teachers as |teacher| }}
              <ol class="b">{{teacher.username}}</ol>
              {{/each}}
          </li>

            <li class="studentslist">
            {{#each section.students as |student|}}
            <ol class="c"> {{student.username}}
             <button class="student_button" {{action 'removeStudent' student}} style="">Remove</button>
            </ol>
            {{/each}}
          </li>
        </ul>
      </fieldset>
    </form>

  {{#if isAddingStudents}}
  {{else}}
  <section class="submit">
    <button class="action_button" {{action 'addNewStudents'}} style="margin-right: 30px">
      Add New Students
    </button>

    <button class="action_button" id="editSection" {{action 'editSection'}} style="margin-right: 30px">
      Edit Section
    </button>
  </section>
  {{/if}}

  {{#if isAddingStudents}}
  <form id='createSectionForm' class='properForm'>
    <fieldset>

    <h2>Use default password for all new students?
    {{input type="checkbox" checked=usingDefaultPassword name="usingDefaultPassword"}} </h2>

      {{!-- <label for="name">Name</label>
      {{input id="studentName" type="text" value=studentName placeholder="name" action="checkError" on="key-down"}} --}}

     <div class="half">

      <label>Username</label>
      {{input id="students" type="text" value=studentUsername placeholder="Filter by username" classNames="editor search" action="checkError" on="key-down"}}
        <ul>
        {{#each searchResults as |result|}}
          <li>
            <button class="addStudent" id="addStudent" {{action 'addStudent' result}}>{{result.username}}</button>
          </li>
          {{/each}}
        </ul>
      </div>

     {{!-- <label for="addusername">Username</label>
      {{input id="students" type="text" value=studentUsername placeholder="" action="checkError" on="key-down"}} --}}

      {{#unless usingDefaultPassword}}
      <label for="addpassword">Password</label>
      {{input id="studentPassword" type="password" value=studentPassword placeholder="password" action="checkError" on="key-down"}}
      {{/unless}}

    {{#if usingDefaultPassword}}
    <label>Password </label>
    {{input type=fieldType value=defaultPassword placeholder="default password" action="checkError" on="key-down"}}
    {{/if}}
    <button id="show-password-btn" {{action "showPassword"}}>
        {{#if showingPassword}}
        <i class="fas fa-eye-slash"></i>
        {{else}}
        <i class="fas fa-eye"></i>
        {{/if}}
      </button>

    <button class="action_button" {{action 'createStudent'}} style="margin-right: 30px"> + </button>


       {{#if userAlreadyInSection}}
        <p class="error-message"> Username: {{studentUsername}} registered in this section.</p>
        <button class="action_button" {{action 'exitAddExistingUsername'}} style="margin-right: 10px"> Close </button>
      {{/if}}

         {{#if doYouWantToAddExistingUser}}
      <p class="error-message"> {{studentUsername}} belongs to the same organization. Do you want to add {{studentUsername}} to this section?
      <button class="action_button" {{action 'addExistingStudent'}} style="margin-right: 30px"> yes </button>
      <button class="action_button" {{action 'exitAddExistingUsername'}} style="margin-right: 10px"> no </button>
      </p>
      {{/if}}

    </fieldset>
        <button class="action_button" {{action 'doneAdding'}}>Done</button>
  </form>

    {{#if usernameAlreadyExists}}
      <p class="error-message"> Can not add username:{{studentUsername}} to this section.</p>
      {{/if}}

  {{#if studentsNotEmpty}}
  <div class="studentList">
    <h2>Created Student Accounts</h2>
    <ul>
      {{#each createdStudents as |student|}}
      <li>{{student.username}}</li>
      {{/each}}
    </ul>
    <ul></ul>
  </div>
  {{/if}} {{/if}}

{{/if}}
